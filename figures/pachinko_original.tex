\begin{tikzpicture}
	[
	observed/.style={minimum size=26pt,circle,draw=blue!50,fill=blue!20},
	unobserved/.style={minimum size=26pt,circle,draw},
	post/.style={->,>=stealth',semithick},
	]
	
	\node (w-j) [observed] at (0,0) {$W$};
	\node (z-3) [unobserved, above of= w-j, node distance=1.5cm] {$Z_{w3}$};
	\node (z-2) [unobserved, left of= z-3, node distance=1.5cm] {$Z_{w2}$};
	\node (z-1) [unobserved, left of= z-2, node distance=1.5cm] {$Z_{w1}$};
	
	\node (theta_r) [unobserved, above of= z-2, node distance=2cm] {$\theta_r^d$};
	\node (alpha_r) [unobserved, above of= theta_r , node distance=2cm] {$\alpha_r$};
	
	\node (theta_k) [unobserved, above of= z-3, node distance=2cm] {$\theta_{t}^d$};
	\node (alpha_k) [unobserved, above of= theta_k , node distance=2cm] {$\alpha_{t}$};
	
	\node (theta_s2) [unobserved, left of=w-j , node distance=6cm] {$\theta_{t}$};
	\node (beta) [unobserved, above of=theta_s2 , node distance=2.5cm] {$\beta$};
	
	\path
	(z-3) edge [post] (w-j)
	(z-2) edge [post] (z-3)
	(z-1) edge [post] (z-2)
	
	(theta_r) edge [post] (z-2)
	(alpha_r) edge [post] (theta_r)
	
	(theta_k) edge [post] (z-3)
	(alpha_k) edge [post] (theta_k)
	
	(theta_s2) edge [post] (w-j)
	(beta) edge [post] (theta_s2)
	;
	
	\node [draw,fit=(w-j) (theta_r) (z-1), inner sep=25pt] (plate-context) {};
	\node [above left] at (plate-context.south east) {$N$};
	
	\node [draw,fit=(w-j) (z-1), inner sep=12.5pt] (plate-token) {};
	\node [above left] at (plate-token.south east) {$|d|$};
	
	\node [draw,fit=(theta_s2), inner sep=10pt] (plate-token) {};
	\node [above left] at (plate-token.south east) {$S_2$};
	
	\node [draw,fit=(theta_k) (alpha_k), inner sep=10pt] (plate-token) {};
	\node [above left] at (plate-token.south east) {$S_1$};
\end{tikzpicture}
